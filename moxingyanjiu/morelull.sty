%
% 个人自用文档样式
%

\ProvidesPackage{morelull}[2019/09/23 v0.1.4]


\RequirePackage{ctex}
\RequirePackage{ifpdf,ifxetex}
\RequirePackage{amsmath,amssymb,amsthm,bm,bbding,pifont,dsfont}
\RequirePackage{mathtools}
\RequirePackage{paralist,cases,tabularx}
\RequirePackage{pstricks,pst-plot,xcolor,graphicx,tikz,pgfplots,pgfmath,tikz-3dplot}
\RequirePackage{esvect,stmaryrd}
\usetikzlibrary{calc,math,arrows.meta,graphs,intersections}
\RequirePackage{subfigure}
\RequirePackage{makecell}
\RequirePackage{caption}
\captionsetup[figure]{labelfont={bf},labelformat={default},labelsep=period,name={图}}
%column
\RequirePackage{booktabs}
\RequirePackage{colortbl}
\RequirePackage{multirow}
\RequirePackage{multicol}
% 调色板
\RequirePackage{xcolor-material}
% 代码提示
%\RequirePackage{listings}
% 版边边距
%\RequirePackage[left=2cm, right=2cm, bottom=2cm]{geometry}
% 更加现代定理、引用提示
\RequirePackage{tcolorbox}
% 书签
\RequirePackage[open, openlevel=2, atend]{bookmark}
% 选项相关
\RequirePackage{xkeyval}
\RequirePackage{framed}%包中有添加文字背景色命令shaded%
\colorlet{shadecolor}{blue!20}
\colorlet{PrimaryColor}{MaterialBlue900}


%%% CTEX格式设置 %%
\ctexset{
  today=small,
  contentsname={文章导航},
  section/format=\Large\bfseries\centering\color{PrimaryColor},
  subsection/number={\textcolor{MaterialBlue900}{\thesubsection}},
}


\newcounter{@dati}
\newif\if@houpinfen \@houpinfenfalse

\newcommand\xuanze{
  \stepcounter{@dati}
  \fullwidth{
      \heiti \chinese{@dati}、 选择题(本大题共~10~题，每小题~4~分，满分~40~分)
  }
}

%%%定义选择题选项%%%
\newcommand{\onech}[4]{
\renewcommand\arraystretch{1.4}
\begin{tabularx}{\linewidth}{XXXX}
\setlength\tabcolsep{0pt}
%(A) #1 & (B) #2 & (C) #3 & (D) #4 \\
A. #1 & B. #2 & C. #3 & D. #4 \\
\end{tabularx}
\unskip \unskip}
\newcommand{\onechx}[4]{
\renewcommand\arraystretch{1.6}
\begin{tabularx}{\linewidth}{XXXX}
\setlength\tabcolsep{0pt}
%(A) #1 & (B) #2 & (C) #3 & (D) #4 \\
A. #1 & B. #2 & C. #3 & D. #4 \\
\end{tabularx}
\unskip \unskip}
\newcommand{\twoch}[4]{
\renewcommand\arraystretch{1.4}
\begin{tabularx}{\linewidth}{XX}
\setlength\tabcolsep{0pt}
A. #1 & B. #2 \\
C. #3 & D. #4
\end{tabularx}
\unskip \unskip}
\newcommand{\twochx}[4]{
\renewcommand\arraystretch{1.6}
\begin{tabularx}{\linewidth}{XX}
\setlength\tabcolsep{0pt}
A. #1 & B. #2 \\
C. #3 & D. #4
\end{tabularx}
\unskip \unskip}
\newcommand{\fourch}[4]{
\renewcommand\arraystretch{1.4}
\begin{tabularx}{\linewidth}{X}
\setlength\tabcolsep{0pt}
A. #1 \\
B. #2 \\
C. #3 \\
D. #4 \\
\end{tabularx}
\unskip \unskip}
\newcommand{\fourchx}[4]{
\renewcommand\arraystretch{1.6}
\begin{tabularx}{\linewidth}{X}
\setlength\tabcolsep{0pt}
A. #1 \\
B. #2 \\
C. #3 \\
D. #4 \\
\end{tabularx}
\unskip \unskip}

\newcommand\tiankong{
  \stepcounter{@dati}
  \fullwidth{
    \heiti \chinese{@dati}、 填空题(本大题共~4~小题，每小题~5~分，满分~20~分)
  }
}
\newcommand{\stk}[1]{
  \ifprintanswers
    \underline{~#1~}
  \else
    \underline{~\hspace{1cm}~}
  \fi}
\newcommand{\mtk}[1]{
  \ifprintanswers
    \underline{~#1~}
  \else
    \underline{~\hspace{2cm}~}
  \fi}
\newcommand{\ltk}[1]{
  \ifprintanswers
    \underline{~#1~}
  \else
    \underline{~\hspace{3cm}~}
  \fi}

\newcommand\jiandaa{
  \stepcounter{@dati}
  \fullwidth{
      \heiti \chinese{@dati}、（本大题共~2~小题，每小题~8~分，满分~16~分）
  }
}


%%% 链接设置 %%%
\RequirePackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=MaterialPink,
  urlcolor=MaterialBlue,
  filecolor=MaterialGreen,
}

%%% 代码高亮设置 %%%
\tcbuselibrary{listings}

\lstset{
  frame=single,
  frameround=tttt,
  framesep=1pt,
  framextopmargin=6pt,
  framexbottommargin=6pt,
  tabsize=4,
  breaklines=true,
  upquote=true,
  captionpos=b,
  basicstyle=\footnotesize,
  backgroundcolor=\color{MaterialBlue50},
  rulecolor=\color{MaterialBlue},
  identifierstyle=\color{MaterialBlue800},
  commentstyle=\itshape\color{MaterialGreen700},
  stringstyle=\bfseries\color{MaterialAmber800},
  keywordstyle=\bfseries\color{MaterialPurple700},
  numberstyle=\bfseries\color{MaterialGrey800},
}

\lstdefinelanguage{javascript}{
  morekeywords={const, let, class, Promise, try, catch, Error, async, await, super, constructor},
  sensitive=true,
  morecomment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]',
  morestring=[b]",
  morestring=[b]`,
}
\lstalias{js}{javascript}


% user defined color
\definecolor{thinkcolor}{RGB}{227,196,144}
\definecolor{observecolor}{RGB}{153,201,227}
\definecolor{explorecolor}{RGB}{178,217,200}

\tcbset{
    common/.style={
		enhanced,
		arc=0mm,
		fonttitle=\large\bfseries,
		coltitle=black,
		attach boxed title to top left={xshift=0mm,
										yshift=-0.50mm},
		boxed title style={
			skin=enhancedfirst jigsaw,
			size=small,
			arc=5mm,
			bottom=0mm,
			left=8mm,
			right=18mm,
			top=1mm},
			boxrule=0pt,
			frame hidden},
    thinkstyle/.style={
		common,
		colbacktitle=thinkcolor,
		colframe=thinkcolor,
		colback=thinkcolor!40,
		borderline north={4pt}{0pt}{thinkcolor}},
	observestyle/.style={
		common,
		colbacktitle=observecolor,
		colframe=observecolor,
		colback=observecolor!40,
		borderline north={4pt}{0pt}{observecolor}}
}

\newtcolorbox{think}{thinkstyle,title=思考}
\newtcolorbox{observe}{observestyle,title=观察}
\newtcolorbox{custom}[2][gray]{
	common,
	title=#2,
	colbacktitle=#1,
	colframe=#1,
	colback=#1!40,
	borderline north={4pt}{0pt}{#1}}

%%%例题环境%%%	
\newcounter{example}
\renewcommand{\theexample}{\arabic{example}}
\newenvironment{example}[1][]{\par \refstepcounter{example}\noindent\textbf{\ding{52}例 \theexample:\ #1} }{\hspace{\stretch{1}}\par  }%\rule{1ex}{1ex}

%%% 页眉页脚设置 %%%
\RequirePackage{fancyhdr}
\RequirePackage{lastpage}
\RequirePackage{geometry}
\geometry{%A4
	paperwidth=210mm, 
	paperheight=297mm,
	marginparsep=-1mm,
	left=20mm,
	right=20mm,
	top=20mm,
	bottom=30mm
}
\pagestyle{fancy}
%\rhead{\includegraphics[height=1cm]{gzh.jpg} }
%\rhead{ 一粒沙整理制作}
%\chead{ \color{MaterialBlue900}QQ:724603614}
%\lhead{\includegraphics[height=1cm]{wxewm.jpg} }
%\lhead{ 知识改变命运}
%\lfoot{{\kaishu \color{MaterialBlue900}知识仿变式}}
%\cfoot{\fangsong \color{MaterialBlue900}第\;\thepage\;页(共\;\pageref{LastPage}\,页\;)}
%\rfoot{{\kaishu \color{MaterialBlue900}学习复思考}}
%\renewcommand{\headrule}{\color{MaterialBlue900}\rule[\baselineskip]{\textwidth}{1pt}}
%\def\headrule{}

\fancyhead[L]{\textcolor{PrimaryColor}{\leftmark}}
\fancyhead[C]{\textcolor{PrimaryColor}{QQ:724603614}}
\fancyhead[R]{\textcolor{PrimaryColor}{\rightmark}}
\fancyfoot[L]{\textcolor{PrimaryColor}{不忘初心砥砺前行}}
\fancyfoot[C]{第~{\color{red}\thepage}~页}
\fancyfoot[R]{\textcolor{PrimaryColor}{长路漫漫未来可期}}
\renewcommand{\headrule}{\color{PrimaryColor}\hrule width\textwidth}

%%% tcolorbox %%%
\tcbuselibrary{theorems}
\tcbuselibrary{skins}
\tcbsetforeverylayer{enhanced}

%%% 自定义命令 %%%
% 专名号
\providecommand\vrmk[1]{%
  \CJKunderline{#1}%
}

% 着重号
\providecommand\vovs[1]{%
  \CJKunderdot{\heiti{#1}}%
}

% 内联代码，单一颜色
\providecommand\code[1]{%
  \ttfamily\textcolor{MaterialPink}{#1}
}

%%% 自定义环境 %%%
% 引用
\newenvironment{ybys}
{\begin{quote}\kaishu\small}
{\end{quote}}

% 定理
\newtcbtheorem[number within=section]{dkli}{定理}{
  fonttitle=\heiti,
  boxrule=0.1mm,
  before upper={\parindent2em},
  colback=MaterialGreen50,
  colframe=MaterialGreen,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialGreen}
}{}

% 结论
\newtcbtheorem[number within=section]{jply}{巩固}{
  fonttitle=\heiti,
  boxrule=0.1mm,
  before upper={\parindent2em},
  colback=MaterialTeal50,
  colframe=MaterialTeal,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialTeal}
}{}

% 命题
\newtcbtheorem[number within=section]{mkti}{命题}{
  fonttitle=\heiti,
  boxrule=0.1mm,
  before upper={\parindent2em},
  colback=MaterialBlueGrey50,
  colframe=MaterialBlueGrey,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialBlueGrey}
}{}

% 定义
\newtcbtheorem[number within=section]{dkyi}{例题}{
  fonttitle=\heiti,
  boxrule=0.1mm,
  colback=MaterialCyan50,
  before upper={\parindent2em},
  colframe=MaterialCyan,
  attach boxed title to top left={xshift=12pt, yshift*=-\tcboxedtitleheight/2},
  boxed title style={colback=MaterialCyan}
}{}

% 内置提示框
\newtcolorbox{tiuikl}[1]{
  skin=empty,
  top=0pt,
  bottom=0pt,
  toprule=0pt,
  bottomrule=0pt,
  leftrule=0pt,
  rightrule=0pt,
  borderline west={2pt}{0pt}{#1},
}

% 提示
\newenvironment{tiui}
{\begin{tiuikl}{MaterialBlue}
      \textcolor{MaterialBlue}{\heiti{提示：}}
}
{\end{tiuikl}}

% 提醒
\newenvironment{tixk}
{\begin{tiuikl}{MaterialDeepOrange}
      \textcolor{MaterialDeepOrange}{\heiti{提醒：}}
}
{\end{tiuikl}}

% 注意
\newenvironment{vuyi}
{\begin{tiuikl}{MaterialRed}
      \textcolor{MaterialRed}{\heiti{注意：}}
}
{\end{tiuikl}}